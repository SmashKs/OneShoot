/*
 * Copyright (C) 2018 The Smash Ks Open Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

android {
    def globalConfiguration = rootProject.extensions.getByName("ext")

    compileSdkVersion globalConfiguration["androidCompileSdkVersion"]
    buildToolsVersion globalConfiguration["androidBuildToolsVersion"]
    defaultConfig {
        applicationId "smash.ks.com.oneshoot"
        minSdkVersion globalConfiguration["androidMinSdkVersion"]
        targetSdkVersion globalConfiguration["androidTargetSdkVersion"]
        multiDexEnabled true
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        renderscriptSupportModeEnabled true    // Enable RS support
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    dexOptions { javaMaxHeapSize "4g" }
    packagingOptions { exclude 'META-INF/rxjava.properties' }
}

androidExtensions { experimental = true }

kotlin {
    experimental {
        coroutines "enable"
    }
}

kapt {
    correctErrorTypes = true
    generateStubs = true
    useBuildCache = true
    mapDiagnosticLocations = true
}

dependencies {
    def pd = rootProject.ext.presentationDependencies
    def ptd = rootProject.ext.presentationTestDependencies

    def gd = rootProject.ext.globalDependencies
    def gtd = rootProject.ext.globalTestDependencies

    //region Project Module
    implementation project(':domain')
    implementation project(':data')
    //endregion

    implementation fileTree(include: ['*.jar'], dir: 'libs')

    implementation "com.devrapid.jieyi:kotlinknifer:1.3.3"

    //region Language
    implementation gd.kotlin
    implementation gd.kotlinReflect
    implementation gd.kotlinCoroutine
    //endregion

    //region Android support
    implementation pd.ankoCommon
    implementation pd.ankoSdk25
    implementation pd.ankoAppcompat
    implementation pd.androidKtx
    //endregion

    //region Firebase
    implementation pd.firebaseCore
    implementation pd.firebaseDatabase
    implementation pd.firebaseAuth
    //endregion

    //region Architecture
    // Dagger 2
    kapt pd.dagger2Compiler
    kapt pd.dagger2AndroidProcessor
    implementation pd.dagger2
    implementation pd.dagger2AndroidSupport
    //endregion

    //region Reaction programming
    implementation(pd.rxbus, {
        exclude group: 'com.jakewharton.timber', module: 'timber'
    })
    implementation pd.rxlifecycle2Component
    implementation pd.rxlifecycle2
    implementation pd.rxbinding2
    implementation pd.rxbinding2Appcompat
    implementation pd.rxbinding2Design
    implementation pd.rxbinding2RecyclerView
    implementation pd.rxpermission2
    //endregion

    //region Internet
    implementation pd.retrofit2
    implementation pd.retrofit2ConverterGson
    implementation pd.retrofit2AdapterRxJava2
    implementation pd.okhttp3InterceptorLog
//    implementation 'org.jsoup:jsoup:1.10.3'
    //endregion

    implementation pd.androidCompat
    implementation pd.androidAnnot
    implementation pd.androidConstraintLayout

    testImplementation 'junit:junit:4.12'

    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'

}

//apply plugin: 'com.google.gms.google-services'